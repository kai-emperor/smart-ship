<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>船队管理系统</title>
    <link rel="stylesheet" href="../css/jquery-ui.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/monitor.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/jquery-ui.min.js"></script>
</head>

<body>
  <div>
    <header>
      <div class="header-content">
        <div class="header-left">
          <img class="left" src="../img/report/left.png" />
          <span class="header-title"></span>
          <img class="right" src="../img/report/right.png" />
        </div>
        <div class="header-right">
          <a href="/pages/dashboard.html" class="nav">
            <img src="../img/report/home.png" alt="">
          </a>
          <a href="/pages/monitor.html" class="nav">
            <img src="../img/report/video.png" alt="">
          </a>
          <a href="/pages/trajectory.html" class="nav">
            <img src="../img/report/logistics.png" alt="">
          </a>
          <!-- <div class="layout-toggle" style="position: fixed;top: 0 ;left: 900px;">
            <button class="btn btn-primary">切换布局模式</button>
            </div> -->
          <div class="dateTime">
            <div class="time">12:33:38</div>
            <div class="date">2025-6-12 星期三</div>
          </div>
        </div>
      </div>
    </header>
    <main>
        <div class="monitor-content"></div>
        <div class="monitor-container three-column" id="monitorContainer">
            <!-- 动态生成监控项 -->
        </div>
        <div id="maskContiner" class="mask">
            <div class="mask-content">
                <div class="mask-title"></div>
                <div class="mask-info">
                    <div class="info-time"></div>
                    <div class="mask-close"></div>
                </div>
                <div class="mask-info-content"></div>
            </div>
        </div>
    </main>
    <footer>
        <div class="footer-content">
            <div class="footer-container">
                <div class="box">
                    <div class="boxin"></div>
                </div>
                <div class="line"></div>
                <div class="box">
                    <div class="boxin"></div>
                </div>
            </div>
            <div class="content">智慧船情公司</div>
            <div class="footer-container">
                <div class="box">
                    <div class="boxin"></div>
                </div>
                <div class="line"></div>
                <div class="box">
                    <div class="boxin"></div>
                </div>
            </div>
        </div>
    </footer>
  </div>
  <script>
    $(function () {
        // 模拟接口返回的监控数据
        const mockMonitorData = [
            { title: "船舶监控1号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控1号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控1号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控2号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控3号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控4号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控5号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控6号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控7号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控8号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控9号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控10号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控11号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控12号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控13号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控14号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控15号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控16号 | 实时视频",time:'2025-06-12 10:20:26' },
            { title: "船舶监控17号 | 实时视频",time:'2025-06-12 10:20:26' },
        ];

      // 读取参数值
      const title =  '视频监控'
      $('.header-title').text(title);
        // 初始化布局
        initLayout();
        
        // 模拟数据生成
        generateMonitorItems(mockMonitorData);
        
        // 窗口大小变化时重新计算布局
        $(window).on('resize', initLayout);
        
        // 布局模式切换
        $('.layout-toggle').click(toggleLayoutMode);
              // 新增点击事件处理
        $('#monitorContainer').on('click', '.monitor-item', function() {
            const title = $(this).find('.video-info').text();
            const time = $(this).find('.monitor-time').text();
            $('.mask-title').text(title);
            $('.info-time').text(time);
            const container = $('#maskContiner');
            container.css('display','block')
        });
        $('.mask-close').click(function () {
            const container = $('#maskContiner');
            container.css('display','none')
        })
        function initLayout() {
            const container = $('#monitorContainer');
            container.css('height', container.parent().height());
            adjustScrollContainer();
        }
        
        function generateMonitorItems(monitorDataList) {
            const container = $('#monitorContainer');
            container.empty();
            
            // 遍历监控数据列表生成监控项
            monitorDataList.forEach((monitorData, index) => {
                const item = $(`
                    <div class="monitor-item">
                        <div class="video-info">${monitorData.title}</div>
                        <div class="video-placeholder">
                            <!-- 监控视频占位，目前暂时使用图片替代 -->
                            <div class="monitor-info-content">
                                <div class="monitor-time">${monitorData.time}</div>    
                            </div>
                        </div>
                    </div>
                `);
                container.append(item);
            });
        }
        
        function toggleLayoutMode() {
            const container = $('#monitorContainer');
            
            if(container.hasClass('three-column')) {
            container.removeClass('three-column')
                    .addClass('four-column');
            } else {
            container.removeClass('four-column')
                    .addClass('three-column');
            }
            
            // 更新滚动容器高度
            adjustScrollContainer();
        }
        
        function adjustScrollContainer() {
            const container = $('#monitorContainer');
            const parent = container.parent();
            
            // 设置最大高度限制
            if(container.hasClass('three-column')) {
            container.css('max-height', parent.height() );
            } else {
            container.css('max-height', parent.height() );
            }
        }

    });  
  </script>
</body>

</html>